<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" xmlns="http://www.w3.org/1999/xhtml" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="author" ,="" content="Bill Cheswick">
    <meta name="description" content="The Digital Darkroom at the
      Liberty Science Center">
    <meta name="keywords&quot;" content="digital darkroom, Bill
      Cheswick, science exhibits, liberty science center, Gerard
      Holtzmann">
    <title></title>
  </head>
  <body>
    <h1>Contents</h1>
    <menu>
      <li><a href="#features">Features</a> </li>
      <li><a href="#transforms">Transforms</a> </li>
      <menu>
        <li><a href="#depth">Depth visualizations</a> </li>
        <li><a href="#geometric">Geometric transforms</a> </li>
        <li><a href="#polargeometric">Polar geometric transforms</a> </li>
        <li><a href="#areatransforms">Area transforms</a> </li>
        <li><a href="#pointtransforms">Point Transforms</a> </li>
      </menu>
      <li><a href="#history">History</a> </li>
    </menu>
    <p> </p>
    <h1 tag="features">Features</h1>
    <h1 tag="transforms">Transforms</h1>
    <h1 tag="userinterface">User interface</h1>
    <p><br>
    </p>
    <h1 tag="remarks">Remarks</h1>
    <h2>Seen it before?</h2>
    You have probably seen a lot of programs that transform video
    images, and some have much fancier modifications available. Why
    write this app? <br>
    <br>
    The original program (see <a href="#history">history</a> below) was
    derived from software and a little language created by Gerard
    Holtzmann at Bell Labs. He and others created a number of original
    effects, some of which are not found elsewhere. It seems like fun to
    preserve and present them.<br>
    <br>
    The original exhibit was quite popular when it opened in 1993. It
    captured still images and allowed a sequence of transforms on an
    image, not just a single one. This ability to combine transforms
    allowed endless experimentation, far beyond just sampling each
    transform. <br>
    <br>
    By the early 2000s, CPUs ran fast enough that it was reasonable to
    recreate the exhibit transforming live images. Now, iOS devices have
    plenty of power to transform images, and I haven't really tried to
    optimize the app (yet) to use much of the available compute power. <br>
    <br>
    That ability to stack transforms is preserved in this app. It isn't
    the default--- you have to tap the Plus button, or the Plus Lock
    button. My two-year old granddaucanghter&nbsp; have a lot of fun
    just playing with weird funhouse mirror effects using the
    toddler-tested user interface. But I could play with stacking these
    in interesting ways, and some of the simple transforms are meant as
    useful glue to stacking operations. <br>
    <br>
    Finally, most iOS devices now have 3D depth data available: how far
    away is each pixel? This offers a number of new possibilities, and
    some depth visualizations are now available that can be further
    processed by the usual set of transforms.
    <h2>Ugly and groteque?</h2>
    <p>These transforms can create quite bizarre and grotesque
      modifications of the human face, and there have been some
      complaints about this. This is especially true of the geometric
      transforms that rearrange the pixels in the image. Of course, for
      others, this is just plain fun.&nbsp; <br>
    </p>
    <p>But a number of transforms and their combinations, particularly
      those that simulate art styles, can be quite striking and
      beautiful.<br>
    </p>
    <h1 tag="history">History</h1>
    <h2>The Digital Darkroom at the Liberty Science Center</h2>
    <p><a href="#history"> <img src="i-lsc.jpg"> </a><a
        href="http://www.cs.bell-labs.com/~gerard/">Gerard Holzmann</a>
      and I wrote the Digital Darkroom for the <a
        href="http://www.lsc.org/">Liberty Science Center</a>. This
      software was written to bring some of Gerard's early work on image
      processing to the museum members. A simplification of this
      software, the <a href="http://www.creative.org/art_studio.html">Portrait






















        Style Station</a>, is now running at <a
        href="http://www.creative.org/">Creative Discovery Museum</a> in
      Chattanooga, Tenn. Both of these programs are available to
      non-profit institutions from the authors in exchange for lifetime
      family memberships. </p>
    <p> </p>
    <h2>Some Technical Details</h2>
    The program runs on a fast PC equipped with a floppy drive and any
    Targa frame capture board that implements the old Targa-16 commands.
    At the museum it currently runs on a 486 host at 50Mhz: almost
    steam-driven speeds. It has 8MB of ramdisk to implement "undo" and
    keep some images for the attract loop. Obviously, it needs a camera
    and a video monitor (distinct from the VGA display) to capture and
    display its results.
    <p> The entire program fits on a single floppy disk, so it is easy
      to change versions or back up the software. No hard drive is
      needed. It does take a couple of minutes to boot, but runs off the
      RAM after that. </p>
    <p> </p>
    <h2>User Interface</h2>
    <p>The basic user interface is literally designed for a two-year
      old.&nbsp; There is the current image, and an array of transform
      thumbnails, each with a name and a live display of their effect on
      the current source image. (That took some work!) The thumbnails
      will probably not all fit on the screen, and the array may be
      scrolled.<br>
    </p>
    <p>The thumbnails are selected with a tap, of course.&nbsp; A
      one-second press on one may show help information for those older
      than two years old.&nbsp; <br>
    </p>
    <p>For the two-year old's convenience, selecting a transform
      deselects the previous one.&nbsp; But the plus button on the lower
      left will add another transform, greatly increasing the
      possibilities for exploration.&nbsp; Next to the Plus button is
      the Plus Lock, so one can automatically keep adding
      transforms.&nbsp; The lower right has an Undo arrow to delete the
      last one, and a trash button to remove all transforms.&nbsp; <br>
    </p>
    <p>A list of the current transform(s) appear at the bottom of the
      display.<br>
    </p>
    <p>The main display may be pinched to adjust its size.&nbsp;&nbsp; A
      single tap pauses and un-pauses the video update. A two-finger tap
      (not a double tap!) saves the current image in your Photos
      album.&nbsp; (You will have to give the DigitalDarkroom app
      permission the first time you do this.) A three-fingered tap will
      save the image, and a screen capture.<br>
    </p>
    <p>The main screen may be pinched to vary the size of the image.
      Many of the transforms can be adjusted: try dragging left and
      right on the main screen to vary width, size, number, depth,
      etc.&nbsp; Transforms that can be varied have "*" after their name
      in the thumbnail.<br>
    </p>
    At the museum, the user interface consists of a track ball and a VGA
    display. My original design called for a touch screen--- one of
    those tough ones found in airports---and I stick with that choice.
    It is the most obvious user interface, and quite appropriate. <a
      href="lsc.gif">Here is the screen</a>.
    <p> You need enough light to let the camera do a good job, and this
      exhibit just meets this requirement. It would be better to have
      better lighting. We let the user adjust the camera for the best
      shot. Its travel could be improved, and the setup is a little
      difficult for a small kid to use. </p>
    <p> Though the video camera used is quite expensive, it lacks a
      switch to reverse the scanning direction. This means that the
      camera/video display acts in reverse of a mirror: you move right,
      the image moves left. It takes a few seconds to get used to this.
      There is a reticle with a "+" in the center for lining up your
      nose (or whatever) with the center of processing. </p>
    <p> </p>
    <h2>The Algorithms</h2>
    The software is written in Microsoft C, using the Targa graphics
    library. A copy of the source code is stored compressed on the boot
    floppy.
    <p> Many of the transform algorithms are Gerard's, but we've had fun
      adding others. Academy award winner Tom Duff supplied several, and
      I have invented a few. My (then) eight year old son described
      "Terry's kite". </p>
    <p> </p>
    <h2>Printing</h2>
    The software currently supports an HP Laserjet for monochrome
    printouts. It would be easy to add color printing.
    <p> There are two problems with supporting an attached printer:
      people often print out unmodified pictures of themselves (putting
      those people at the Jersey shore out of business), and it costs
      money to run the printer. </p>
    <p> I originally implemented a software and hardware interface to a
      coin slot. The controller is run through a parallel interface. It
      worked in my tests, but wasn't used for a couple of years. When
      they wanted to use it, the parallel port no longer worked. I
      haven't had time to fix it. </p>
    <p> The coin device has a relay to reject all coins. We don't want
      to take a quarter and fail to supply a picture. There are several
      ways that the printer can fail, and the software carefully rejects
      coins if the printer is offline, out of paper, jammed, etc. </p>
    <p> The software allows user-specified printing costs, and prints a
      summary of printer usage as a simple accounting tool. </p>
    <p> </p>
    <h1>Visualizations and Transforms</h1>
    <p> </p>
    <h2>Depth visualizations</h2>
    <p> iOS devices now commonly provide per-pixel depth information.
      This provides an opportunity to create live depth visualizations,
      including, perhaps, some new ones. </p>
    <p> </p>
    <h2>Transforms</h2>
    <p> Many of these transforms have a parameter that may be adjusted
      by dragging a finger left and right over the display. </p>
    <p> </p>
    <h3>Kaleidoscope</h3>
    A traditional kaleidoscope is a tube containing two mirrors.
    Usually, the far end has pieces of colored plastic or other items,
    and the mirrors show an image of these items. Here, the video source
    is processed in a similar manner.
    <p> The angle of the simulated mirrors can be adjusted to give quite
      varying effects. With some of the depth visualizations one can
      generate a rich source of such designs similar to Islamic
      geometric art or mandellas. </p>
    <h2>Discussion</h2>
    The Museum's original educational intent was to spur interest in the
    science behind the exhibits. (The staff has turned over several
    times since the museum opened, and their current philosophy may be
    different.) Gerard and I wanted to teach more about exactly what was
    going on in the exhibit, and in the individual transforms.
    <p> This hasn't happened, and it would be nice to add explanations.
      Perhaps this web page is a start. Though some of the transforms
      are quite technical, and best described in the computer language
      they are written in, many are easy to explain. We need to do this,
      perhaps with a poster next to the exhibit. </p>
    <p> The processed image is only 256 by 200 with 5 bits each of
      color. This small size makes processing quite fast, even for
      complex transforms. When possible, I tried to show the algorithm
      as it proceeds. This may help the user figure out what is going
      on, and is certainly more interesting than seeing nothing while
      the computation occurs. </p>
    <p> Like many things, the best museum exhibits leave the user
      wanting to do a little more. If you find an exhibit on an
      uncrowded day that can keep you interested for half an hour or
      more, that is a good exhibit. By that measure, we have done well.
      I have a duplicate of the setup in my home, and I still find some
      new effects and interesting combinations of transforms
      occasionally. </p>
    <p> </p>
    <h2>Future Work</h2>
    The exhibit has held up well, and still attracts a fair crowd. But
    there are lots of possibilities.
    <p> First of all, many transforms are amenable to real-time
      processing with today's processors. I have a prototype of the
      Digital Funhouse implemented on an SGI. This is a high-tech
      version of a funhouse mirror, though I am not sure how you would
      bend metal to do some of the transforms. Real-time is a lot more
      fun, and it is hard to go back to the single-frame digital
      darkroom. </p>
    <p> I need spare time to work on this, and need a faster PC and
      (especially) frame buffer. Once again, I think I can fit
      everything on a single floppy. Some transforms are simply too slow
      for realtime, which is a shame. The "oil paint" and Sobel
      operators would be especially good. </p>
    <p> I'd like to do something similar with sound. It would be easy to
      show the sound spectrum from several sources, and have the user
      specify or design filters. He could see and hear the results.
      There's plenty of CPU power for this one. </p>
    <p> And for all of these, I'd like to sneak in a little more
      education. Perhaps we could teach a little programming, using the
      transforms as statements. </p>
    <p> I am working on an update to this. <a
        href="https://cheswick.com/ex/index.html">Click here</a> for
      details. </p>
    <h1>User interface: taps, touches, pinches, presses, and all that</h1>
    The display size is adjusted by pinching the displayed image.
  </body>
</html>
